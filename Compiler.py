class Compiler:
    def __init__(self):
        self.infile = open('input.txt', "r")
        self.outfile = open('output.txt', "w")
        self.line_number = 0
        self.line_index = 0
        self.current_word = ''
        self.current_char = ''
        self.line = ''
        self.state = 0
        self.keywords = ['if','else','void','int','while','break','continue','switch','default','case','return']
        self.symbols = [';',':',',','[',']','(',')','{','}','+','-','*','=','<','==']
        self.white_spaces = [32,10,13,9,11,12]
        
        self.rules = {
            'Sprim':{
                1:['A']
            },
            'A':{
                1:['A_1']
            },
            'A_1': {
                1: ['B','A_1'],
                2: ['']
            },
            'B': {
                1: ['E','FE_2']
            },
            'FE_2': {
                1: ['id', 'Fid_6']
            },
            'Fid_6': {
                1: ['Fid_1'],
                2: ['(','G', ')', 'H']
            },
            'FE': {
                1: ['id','Fid_1']
            },
            'Fid_1': {
                1: [';'],
                2: ['[', 'num', ']', ';']
            },
            'E': {
                1: ['int'],
                2: ['void']
            },
            'G': {
                1: ['int', 'FE_1', 'I_1'],
                2: ['void','Fvoid']
            },
            'Fvoid': {
                1: ['FE_1', 'I_1'],
                2: ['']
            },
            'I': {
                1: ['J', 'I_1']
            },
            'I_1': {
                1: [',', 'J', 'I_1'],
                2: ['']
            },
            'J': {
                1: ['E', 'FE_1']
            },
            'FE_1': {
                1: ['id', 'Fid_2']
            },
            'Fid_2':{
                1:[''],
                2:['[',']']
            },
            'H': {
                1: ['{', 'A', 'K','}']
            },
            'K': {
                1: ['K_1']
            },
            'K_1': {
                1: ['L', 'K_1'],
                2: ['']
            },
            'L': {
                1: ['M'],
                2: ['H'],
                3: ['N'],
                4: ['O'],
                5: ['P'],
                6: ['Q']
            },
            'M': {
                1: ['R', ';'],
                2: ['continue', ';'],
                3: ['break',';'],
                4: [';']
            },
            'N': {
                1: ['if', '(', 'R', ')', 'L', 'else', 'L']
            },
            'O': {
                1: ['while', '(', 'R', ')', 'L']
            },
            'P': {
                1: ['return', 'Freturn']
            },
            'Freturn': {
                1: [';'],
                2: ['R',';']
            },
            'Q': {
                1: ['switch', '(', 'R', ')', '{','S','T','}']
            },
            'S': {
                1: ['S_1']
            },
            'S_1': {
                1: ['U', 'S_1'],
                2: ['']
            },
            'U': {
                1: ['case', 'num', ':', 'K']
            },
            'T': {
                1: ['default', ':', 'K'],
                2: ['']
            },
            'R': {
                1: ['id','Fid_3'],
                2: ['(', 'R', ')', 'Aprim_1', 'X_1', 'FX'],
                3: ['num', 'Aprim_1', 'X_1', 'FX'],
                4: ['+' ,'F+'],
                5: ['-', 'F-']
            },
            'Fid_3': {
                1: ['Fid', 'FFid'],
                2: ['(', 'Eprim', ')', 'Aprim_1', 'X_1', 'FX']
            },
            'FFid': {
                1: ['=', 'F='],
                2: ['*', 'Bprim', 'Aprim_1', 'X_1', 'FX'],
                3: ['Z', 'Aprim', 'X_1', 'FX'],
                4: ['<', 'X',],
                5: ['']
            },
            'F=': {
                1: ['R'],
                2: [ '=', 'X']
            },
            'F+': {
                1: ['(' ,'R' ,')' ,'Aprim_1' ,'X_1' ,'FX'],
                2: ['id', 'Fid_4'],
                3: ['num', 'Aprim_1', 'X_1', 'FX']
            },
            'Fid_4': {
                1: ['Fid', 'Aprim_1', 'X_1', 'FX'],
                2: ['(' ,'Eprim' ,')' ,'Aprim_1' ,'X_1' ,'FX']
            },
            'F-': {
                1: ['(' ,'R' ,')' ,'Aprim_1', 'X_1' ,'FX'],
                2: ['id','Fid_5'],
                3: ['num' ,'Aprim_1' ,'X_1' ,'FX']
            },
            'Fid_5': {
                1: ['Fid' ,'Aprim_1' ,'X_1' ,'FX'],
                2: ['(' ,'Eprim' ,')' ,'Aprim_1' ,'X_1' ,'FX']
            },
            'V': {
                1: ['id','Fid']
            },
            'Fid': {
                1 :[''],
                2: ['[','R',']']
            },
            'W': {
                1: ['X', 'FX']
            },
            'FX': {
                1: ['Y','X'],
                2: ['']
            },
            'Y': {
                1: ['<'],
                2: ['=', '=']
            },
            'X': {
                1: ['Aprim','X_1']
            },
            'X_1': {
                1: ['Z','Aprim','X_1'],
                2: ['']
            },
            'Z':{
                1: ['+'],
                2: ['-']
            },
            'Aprim': {
                1: ['Bprim','Aprim_1']
            },
            'Aprim_1': {
                1: ['*','Bprim','Aprim_1'],
                2: ['']
            },
            'Bprim': {
                1: ['Cprim'],
                2: ['+', 'Cprim'],
                3: ['-', 'Cprim']
            },
            'Cprim': {
                1: ['(','R',')'],
                2: ['id', 'Fid_7'],
                3: ['num']
            },
            'Fid_7': {
                1: ['Fid'],
                2: ['(', 'Eprim', ')']
            },
            'Dprim':{
                1: ['id','(','Eprim',')']
            },
            'Eprim': {
                1: ['Fprim'],
                2: ['']
            },
            'Fprim': {
                1: ['R','Fprim_1']
            },
            'Fprim_1': {
                1: [',','R','Fprim_1'],
                2: ['']
            },
        }

        self.ll1_table = {
            'Sprim':{
                '$':1,
                'void':1,
                'int':1
            },
            'A':{
                '$':1,
                ',':0,
                ')':0,
                '(':1,
                'id':1,
                'num':1,
                '-':1,
                '+':1,
                '*':0,
                '=':0,
                '<':0,
                ']':0,
                '[':0,
                ':':0,
                'default':0,
                'case':0,
                '}':1,
                '{':1,
                'switch':1,
                ';':1,
                'return':1,
                'while':1,
                'else':0,
                'if':1,
                'break':1,
                'continue':1,
                'void':1,
                'int':1
            },
            'A_1': {
                '$': 2,
                ',': 0,
                ')': 0,
                '(': 2,
                'id': 2,
                'num': 2,
                '-': 2,
                '+': 2,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 2,
                '{': 2,
                'switch': 2,
                ';': 2,
                'return': 2,
                'while': 2,
                'else': 0,
                'if': 2,
                'break': 2,
                'continue': 2,
                'void': 1,
                'int': 1
            },
            'B': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 1,
                'int': 1
            },
            'FE_2': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_6': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 2,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 1,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'FE': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_1': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 2,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'E': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 2,
                'int': 1
            },
            'G': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 2,
                'int': 1
            },
            'Fvoid': {
                '$': 0,
                ',': 0,
                ')': 2,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'I': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 1,
                'int': 1
            },
            'I_1': {
                '$': 0,
                ',': 1,
                ')': 2,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'J': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 1,
                'int': 1
            },
            'FE_1': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_2': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 2,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'H': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 1,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'K': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 1,
                'case': 1,
                '}': 1,
                '{': 1,
                'switch': 1,
                ';': 1,
                'return': 1,
                'while': 1,
                'else': 0,
                'if': 1,
                'break': 1,
                'continue': 1,
                'void': 0,
                'int': 0
            },
            'K_1': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 2,
                'case': 2,
                '}': 2,
                '{': 1,
                'switch': 1,
                ';': 1,
                'return': 1,
                'while': 1,
                'else': 0,
                'if': 1,
                'break': 1,
                'continue': 1,
                'void': 0,
                'int': 0
            },
            'L': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 2,
                'switch': 6,
                ';': 1,
                'return': 5,
                'while': 4,
                'else': 0,
                'if': 3,
                'break': 1,
                'continue': 1,
                'void': 0,
                'int': 0
            },
            'M': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1 ,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 4,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 3,
                'continue': 2,
                'void': 0,
                'int': 0
            },
            'N': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 1,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'O': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 1,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'P': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 1,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Freturn': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 2,
                'id': 2,
                'num': 2,
                '-': 2,
                '+': 2,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Q': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 1,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'S': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 1,
                'case': 1,
                '}': 1,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'S_1': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 2,
                'case': 1,
                '}': 2,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'U': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 1,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'T': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 1,
                'case': 0,
                '}': 2,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'R': {
                '$': 0,
                ',': 0,
                ')': 2,
                '(': 0,
                'id': 1,
                'num': 3,
                '-': 5,
                '+': 4,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_3': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 2,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 1,
                '=': 1,
                '<': 1,
                ']': 1,
                '[': 1,
                ':': 0,
                'default': 1,
                'case': 0,
                '}': 2,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'FFid': {
                '$': 0,
                ',': 5,
                ')': 5,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 3,
                '+': 3,
                '*': 2,
                '=': 1,
                '<': 4,
                ']': 5,
                '[': 0,
                ':': 0,
                'default': 1,
                'case': 0,
                '}': 2,
                '{': 0,
                'switch': 0,
                ';': 5,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'F=': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 2,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'F+': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 2,
                'num': 3,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_4': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 2,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 1,
                '=': 1,
                '<': 1,
                ']': 1,
                '[': 1,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fminus': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 2,
                'num': 3,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_5': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 2,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 1,
                '=': 1,
                '<': 1,
                ']': 1,
                '[': 1,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'V': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 1,
                '=': 1,
                '<': 1,
                ']': 1,
                '[': 2,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'W': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'FX': {
                '$': 0,
                ',': 2,
                ')': 2,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 1,
                '<': 1,
                ']': 2,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 2,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Y': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 2,
                '<': 1,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'X': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'X_1': {
                '$': 0,
                ',': 2,
                ')': 2,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 2,
                '<': 2,
                ']': 2,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 2,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Z': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 2,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Aprim': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Aprim_1': {
                '$': 0,
                ',': 2,
                ')': 2,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 2,
                '+': 2,
                '*': 1,
                '=': 2,
                '<': 2,
                ']': 2,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 2,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Bprim': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 3,
                '+': 2,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Cprim': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 2,
                'num': 3,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fid_7': {
                '$': 0,
                ',': 1,
                ')': 1,
                '(': 2,
                'id': 0,
                'num': 0,
                '-': 1,
                '+': 1,
                '*': 1,
                '=': 1,
                '<': 1,
                ']': 1,
                '[': 1,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 1,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Dprim': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 0,
                'id': 1,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Eprim': {
                '$': 0,
                ',': 0,
                ')': 2,
                '(': 1,
                'id': 2,
                'num': 2,
                '-': 2,
                '+': 2,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fprim': {
                '$': 0,
                ',': 0,
                ')': 0,
                '(': 1,
                'id': 1,
                'num': 1,
                '-': 1,
                '+': 1,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            'Fprim_1': {
                '$': 0,
                ',': 1,
                ')': 2,
                '(': 0,
                'id': 0,
                'num': 0,
                '-': 0,
                '+': 0,
                '*': 0,
                '=': 0,
                '<': 0,
                ']': 0,
                '[': 0,
                ':': 0,
                'default': 0,
                'case': 0,
                '}': 0,
                '{': 0,
                'switch': 0,
                ';': 0,
                'return': 0,
                'while': 0,
                'else': 0,
                'if': 0,
                'break': 0,
                'continue': 0,
                'void': 0,
                'int': 0
            },
            
        }

        self.input = []
        self.stack = []

    def parse(self):
        self.stack.append('$')
        self.stack.append('Sprim')
        while (True):
            self.line = self.infile.readline()
            self.line_index = 0
            self.current_word = ''

            # pr
            if self.line is '':
                break
            # print('here')
            self.current_char = self.line[self.line_index]
            # print(self.stack)
            while self.current_char is not '\n':
                token = self.get_next_token()
                # print('here')
                # print(token['term'])
                # print(self.stack[-1])

                while not ((self.stack[-1][0]>='a' and self.stack[-1][0]<='z') or (self.stack[-1] in self.symbols)):
                    # print('token: ', token['token'])

                    stack_top = self.stack.pop()
                    # print('for nonterminal: ', stack_top)
                    # print(self.stack)
                    if token['term'] == '$' and self.stack[-1] == '$':
                        return
                    # print(stack_top)
                    if token['token'] == 'KEYWORD' or token['token'] == 'SYMBOL':

                        rule = self.ll1_table[stack_top][token['term']]
                    else:
                        # print('here')
                        rule = self.ll1_table[stack_top][token['token']]
                    # print('rule: ',rule)


                    transform = self.rules[stack_top][rule]


                    # print('using rule: ',transform)
                    for i in range(len(transform)):
                        if transform[-1-i] is not '':
                            self.stack.append(transform[-1-i])
                    print('stack: ',self.stack)
                    # print('<==============>')
                self.state = 0
                self.current_word = ''
                self.stack.pop()
                # print('poped')


    def scan(self):
        while (True):
            self.line = self.infile.readline()
            self.line_number = self.line_number +1
            self.line_index = 0
            self.current_word = ''
            
            # print(self.current_char)
            
            if self.line is '':
                break

            self.current_char = self.line[self.line_index]

            while self.current_char is not '\n':

                token = self.get_next_token()
                if token is not None:

                    print(token)
                self.state = 0
                self.current_word = ''


    def get_next_token(self):
        # print('getting token for: ',self.current_char,' at index: ',self.line_index)
        state = 0
        token = ''
        while (True):
            # print(state)
            # print('getting token for: ', self.current_char, ' at index: ', self.line_index)
            if state == 0 and self.current_char >= '0' and self.current_char <= '9':
                token = 'num'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 1
            elif state == 0 and self.current_char == '$':
                return {'token': token,
                        'term': '$'}
            elif state == 0 and self.current_char >= 'a' and self.current_char <= 'z' or self.current_char >= 'A' and self.current_char <= 'Z':
                token = 'id'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 2
            elif state == 0 and self.current_char in self.symbols:
                token = 'SYMBOL'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 5
                if self.current_char in self.symbols:
                    state = 'accept'

            elif state == 5 and self.current_char in self.symbols:
                token = 'SYMBOL'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 5
            elif state == 1 and self.current_char >= '0' and self.current_char <= '9':
                token = 'num'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 1
            elif state == 2 and self.current_char >= '0' and self.current_char <= '9':
                token = 'id'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 2
            elif state == 2 and self.current_char >= 'a' and self.current_char <= 'z' or self.current_char >= 'A' and self.current_char <= 'Z':
                token = 'id'
                self.current_word = self.current_word + self.current_char
                self.line_index = self.line_index + 1
                self.current_char = self.line[self.line_index]
                state = 2
            elif (state == 1 or state == 2) and self.current_char in self.symbols:
                state = 'accept'
            elif (state == 5) and self.current_char >= 'a' and self.current_char <= 'z' or self.current_char >= 'A' and self.current_char <= 'Z':
                state = 'accept'
            elif (state == 5) and self.current_char >= '0' and self.current_char <= '9':
                state = 'accept'

            elif ord(self.current_char) in self.white_spaces:
                # print('hre')
                state = 'accept'
                self.line_index = self.line_index + 1
                if self.line_index < len(self.line):
                    self.current_char = self.line[self.line_index]
                
            
            if state == 'accept':
                if self.current_word in self.keywords:
                    token = 'KEYWORD'
                # self.line_index = self.line_index + 1
                # if self.line_index < len(self.line):
                #     self.current_char = self.line[self.line_index]
                return {'token': token,
                        'term': self.current_word}


if __name__ == '__main__':
    compiler = Compiler()
    compiler.parse()
    